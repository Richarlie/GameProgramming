# 一、决策分析类
## 1.层次分析法
**需求**：根据“流量 质量 颜值”等指标去评价一个明星的价值
可以对指标按照其重要性赋予权重，但问题是权重的赋予通常过于主观

![输入图片说明](/imgs/2025-04-29/8Nr0HwmWY5k1cWLR.png)
**如何客观设置权重？**此时层次分析法就起作用了
`归化处理`+`权重处理`
`归化处理`：把每个指标变成0~1之间的数值


**基本步骤**：
1. 建立模型
2. 构造判断矩阵
3. 一致性检验
4. 求权重后评价

- 第一步：建立模型
建立递阶层次结构模型
目的：明确各指标与对象的关系
![输入图片说明](/imgs/2025-04-29/xacKbcbSFuu63lEh.png)
![输入图片说明](/imgs/2025-04-29/oqrkpNTK11futxpv.png)

- 第二步：构造判断矩阵
- **目的**：对各指标的重要性进行两两比较，以科学得到权重
- 矩阵元素 $a_{ij}$：第i个指标相对第j个指标的重要程度
- **比较标准**：
![输入图片说明](/imgs/2025-04-29/sgw7bDSOwZMLiovw.png)

然而，如果指标过多时，两两比较后难免会造成整体的有失偏颇（也就是指标的重要程度不一致）
此时便需要一致性检验了

- 第三步：一致性检验
**正互反矩阵**：满足$a_{ij}>0且a_{ij}\times a_{ji}=1$的矩阵
$a_{ij}=a_{ik}\times a_{kj}$
**一致矩阵**：满足$a_{ij}\times a_{ik}=a_{kj}$的正互反矩阵
或是满足$a_{ij}\times a_{ik}=a_{kj}$且其各行（列）成倍数关系的矩阵
一致性检验原理就是：检验构造的判断矩阵与一致矩阵的差别是否过大
- 步骤：
- 1. 计算一致性指标CI：
$CI=\frac{\lambda_{max}-n}{n-1}$（$\lambda_{max}$是最大特征值）
- 2. 查找平均随机一致性指标RI：
![输入图片说明](/imgs/2025-05-02/yHUUuhYP7glSZc1Y.png)
- 3. 计算一致性比例CR：
$CR=\frac{CI}{RI}$
$CR=0$：一致矩阵
$CR<0.1$矩阵一致
$CR\geq0.1$矩阵不一致
若特征值中有虚数，则比较的是特征值的模长

- 第四步：求权重![输入图片说明](/imgs/2025-05-02/xHrd9RCWMJcgKkF1.png)
 ![输入图片说明](/imgs/2025-05-02/CZUsH8yE2g7iaBi8.png)
 
## MatLab代码：
 ![输入图片说明](/imgs/2025-05-02/45UGkf0xhspBZmbv.png)
 ![输入图片说明](/imgs/2025-05-02/n5k1PcqMJWqynCb4.png)
 `eig`:求得特征向量和特征矩阵
![输入图片说明](/imgs/2025-05-02/19kkIgg3lP18P16I.png)
 - `Max_eig=max(max(D));`:第一次求最大得矩阵，第二次求最大则提取出最大值（其中max是求每列的最大值）这个变量就是上文的$\lambda_{max}$
 - `disp`:输出
![输入图片说明](/imgs/2025-05-02/UzvHQTI8E1qjvQMH.png)
`sum`:为1→按列求和，为2→按行求和(默认为1)
`repmat`:"repeat martix",后面带上的数值代表其格式是几行几列的
在行维度上复制几次，然后再在列维度上复制几次
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTM5Nzg3MjgxMywtMTgxNTUzMjIxMywzNz
kyODcxNjcsLTcxOTU2OTA1NiwtODA5ODMyNDc3LDEyNzIzMDMw
NCwxMDA2MjM0MTY1LDUzNDgxMzA0OCw2NTk3NTc2LDE3MTM4OD
k5NzAsMzk4NTU3MDRdfQ==
-->